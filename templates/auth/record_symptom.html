{% extends 'base.html' %}

{% block title %}Record Symptom - Happy Healthy{% endblock %}

{% block content %}
<div class="p-4">
    <div class="bg-white rounded-2xl shadow-lg p-6 max-w-2xl mx-auto">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">üìù Record Mental Health Symptom</h2>
        
        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg mb-6">
            <p class="text-sm text-blue-800">
                <strong>About Symptom Tracking:</strong> This feature helps you monitor mental health symptoms 
                based on WHO ICD-10 classifications. Your caregivers will be notified of concerning symptoms.
            </p>
        </div>

        <form method="POST" class="space-y-6">
            {% csrf_token %}
            
            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                    Symptom Type <span class="text-red-500">*</span>
                </label>
                <select name="symptom_type" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm">
                    <option value="">-- Select a symptom --</option>
                    <optgroup label="Mood/Depression">
                        <option value="depressed_mood">Depressed Mood</option>
                        <option value="loss_of_interest">Loss of Interest</option>
                        <option value="fatigue">Fatigue/Loss of Energy</option>
                        <option value="sleep_disturbance">Sleep Disturbance</option>
                        <option value="appetite_change">Appetite Change</option>
                        <option value="concentration_difficulty">Difficulty Concentrating</option>
                        <option value="feelings_worthlessness">Worthlessness/Guilt</option>
                        <option value="psychomotor_agitation">Psychomotor Agitation</option>
                        <option value="suicidal_thoughts">‚ö†Ô∏è Suicidal Thoughts</option>
                    </optgroup>
                    <optgroup label="Anxiety">
                        <option value="excessive_worry">Excessive Worry</option>
                        <option value="restlessness">Restlessness</option>
                        <option value="irritability">Irritability</option>
                        <option value="muscle_tension">Muscle Tension</option>
                        <option value="panic_attacks">Panic Attacks</option>
                        <option value="social_anxiety">Social Anxiety</option>
                    </optgroup>
                    <optgroup label="Behavioral">
                        <option value="social_withdrawal">Social Withdrawal</option>
                        <option value="self_harm">‚ö†Ô∏è Self-Harm</option>
                        <option value="substance_use">Substance Use</option>
                        <option value="mood_swings">Mood Swings</option>
                    </optgroup>
                    <optgroup label="Physical">
                        <option value="headaches">Headaches</option>
                        <option value="body_aches">Body Aches</option>
                        <option value="digestive_issues">Digestive Issues</option>
                        <option value="other">Other</option>
                    </optgroup>
                </select>
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                    Severity Level <span class="text-red-500">*</span>
                </label>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    {% for value, label in severity_levels %}
                    <label class="cursor-pointer">
                        <input type="radio" name="severity" value="{{ value }}" required class="peer hidden">
                        <div class="border-2 border-gray-300 peer-checked:border-blue-500 peer-checked:bg-blue-50 rounded-xl p-4 text-center transition hover:border-blue-400
                                    {% if value == 1 %}bg-green-50{% elif value == 2 %}bg-yellow-50{% elif value == 3 %}bg-orange-50{% else %}bg-red-50{% endif %}">
                            <div class="text-2xl mb-1">
                                {% if value == 1 %}üòå
                                {% elif value == 2 %}üòü
                                {% elif value == 3 %}üò∞
                                {% else %}üÜò{% endif %}
                            </div>
                            <div class="font-semibold text-sm">{{ label }}</div>
                        </div>
                    </label>
                    {% endfor %}
                </div>
                <p class="text-xs text-gray-500 mt-2 break-words">
                    Severity 3+ and critical symptoms will notify caregivers
                </p>
            </div>

            <div>
                <label class="block text-sm font-semibold text-gray-700 mb-2">
                    Additional Notes (Optional)
                </label>
                <textarea name="notes" rows="4" 
                          placeholder="Describe what you're experiencing, triggers, duration, etc..."
                          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none"></textarea>
            </div>

            <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-lg">
                <p class="text-sm text-red-800 font-semibold">
                    üÜò CRISIS RESOURCES:
                </p>
                <ul class="text-xs text-red-700 mt-2 space-y-1">
                    <li><strong>988:</strong> Suicide & Crisis Lifeline</li>
                    <li><strong>Text 741741:</strong> Crisis Text Line</li>
                    <li><strong>911:</strong> Emergency</li>
                </ul>
                <p class="text-xs text-red-600 mt-2 break-words">
                    If in crisis, reach out immediately. This app isn't a substitute for professional care.
                </p>
            </div>

            <div class="flex gap-3">
                <button type="submit" 
                        class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold transition transform hover:scale-105 shadow-lg">
                    Record Symptom
                </button>
                <a href="{% url 'my_symptoms' %}" 
                   class="px-6 py-3 bg-gray-200 hover:bg-gray-300 rounded-xl font-semibold transition text-center">
                    View History
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
